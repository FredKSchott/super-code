<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="../bower_components/paper-tabs/paper-tab.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../bower_components/iron-pages/iron-pages.html">

<dom-module id='super-code-group'>
  <template>

    <style is="custom-style">
      paper-tabs, paper-toolbar {
        background-color: var(--paper-blue-grey-900);
      }
      paper-tab {
        color: #fff;
      }
    </style>

    <style include="iron-flex">
      :host {
        display: block;
        box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14),
                    0 1px 5px 0 rgba(0, 0, 0, 0.12),
                    0 3px 1px -2px rgba(0, 0, 0, 0.2);
      }
      paper-tabs {
        --paper-tabs-selection-bar-color: red;
        --paper-tabs-selection-bar: {
          height: 4px;
        };
      }
      paper-tab {
        font-size: 16px;
        --paper-tab-ink: #F55;
      }
      iron-pages {
        background: white;
        width: 100%;
        height: 100%;
      }
    </style>

    <div class="tabstrip layout horizontal center">
      <paper-tabs selected="{{_selected}}" class="flex">
        <template is="dom-repeat" items="[[_panels]]">
          <paper-tab>{{_getTabNameForPanel(item)}}</paper-tab>
        </template>
      </paper-tabs>
    </div>

    <div class="layout horizontal">
      <iron-pages selected="[[_selected]]">
        <content id="contentpanels" select="super-code"></content>
      </iron-pages>
    </div>

  </template>

  <script>
  Polymer({
    is: 'super-code-group',
    properties: {},
    attached: function() {
      this._observer =
          Polymer.dom(this.$.contentpanels).observeNodes(function(mutations) {
            this._updatePanels();
          }.bind(this));
      this._selected = 0;
    },
    detached: function() {
      Polymer.dom(this.$.contentpanels).unobserveNodes(this._observer);
    },
    _updatePanels: function() {
      this._panels = Polymer.dom(this.$.contentpanels).getDistributedNodes();
      for (let panel of this._panels) {
        panel.hideHeader();
      }
      console.log(this._panels);
    },
    _getTabNameForPanel: function(panel) {
      return panel.getAttribute('title') || panel.getAttribute('language');
    }
  });
  </script>
</dom-module>

<!-- <script type="text/javascript" src="super-code-group-init.js"></script> -->
